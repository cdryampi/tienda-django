{% extends "base/base.html" %}
{% load static %}

{% block title %}Home - Tienda{% endblock %}

{% block content %}

{% if messages %}
<div class="mensaje-exitoso card-panel green lighten-1 white-text" id="mensaje_sistema">
  {% for message in messages %}
    <span>{{ message }}</span>
  {% endfor %}
</div>
{% endif %}

<div class="relative h-screen bg-fixed bg-center bg-cover" style="background-image: url('{% static "images/sample/parallax.jpg" %}');">
  <div class="absolute inset-0 bg-black bg-opacity-80"></div> <!-- Overlay para mejor contraste -->
  
  <div class="relative flex flex-col items-center justify-center h-full text-teal-500 text-center px-6">
      <h1 class="text-4xl md:text-6xl font-bold">
          Bienvenidos a Nuestra Hamburguesería
      </h1>
      <p class="mt-4 text-lg md:text-xl">
          Las mejores hamburguesas al mejor precio
      </p>
      <a href="{% url 'product:product_list' %}" class="mt-6 bg-teal-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-100 hover:text-teal-500 transition">
          Haz tu pedido
      </a>
  </div>

  <!-- Botón de flecha animado -->
  <a href="#productos" class="absolute text-9xl bottom-10 left-1/2 transform -translate-x-1/2" data-aos-delay="500">
    <svg class="w-20 h-20 text-teal-500 animate-bounce" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
    </svg>
  </a>
  
</div>

<!-- Productos destacados -->
<div class="container py-5 mx-auto" id="productos">
  <h2 class="text-center text-3xl text-teal-500">Nuestros Productos</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
    {% for product in products %}
        {% include 'product/product_card.html' %}
    {% endfor %}
  </div>
</div>

<script>
  document.querySelectorAll(".add-to-cart-form").forEach((form) => {
    form.addEventListener("submit", function (event) {
      event.preventDefault();
  
      let formData = new FormData(this);
  
      fetch("{% url 'cart:addProductToCard' %}", {
        method: "POST",
        body: formData,
        headers: {
          "X-CSRFToken": "{{ csrf_token }}"
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === "success") {
          toast.success("✅ Producto añadido al carrito!");
        } else {
          toast.error("❌ Error al añadir el producto.");
        }
      });
    });
  });
  


</script>
{% endblock %}
